{"version":3,"sources":["api/posts.ts","components/PostsList/PostsList.tsx","api/comments.ts","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","api/users.tsx","components/UsersList/UsersList.tsx","App.tsx","index.tsx"],"names":["BASE_URL","loadUsersPosts","a","fetch","response","json","loadUserPostDetails","postId","PostsList","handleOpenPostDetails","selectorValue","useState","postList","setPostList","getUserPosts","userPostsFromServer","filter","post","userId","useEffect","className","map","body","id","type","onClick","loadPostComments","deleteComment","method","addComment","name","email","headers","JSON","stringify","NewCommentForm","getUserComments","userName","setUserName","userEmail","setUserEmail","userComment","setUserComment","handleSubmit","event","preventDefault","onSubmit","placeholder","value","onChange","target","PostDetails","userPostTitle","userComments","setUserComments","isCommemtsHidden","setIsCommemtsHidden","getPostComments","userCommentsFromServer","handleDeleteComment","length","commentary","loadUsers","UsersList","React","memo","handleSelector","users","setUsers","getUsers","usersFromServer","user","App","setUserPostTitle","setPostId","setSelectorValue","Promise","all","postDetailsFromServer","title","useCallback","ReactDOM","render","document","getElementById"],"mappings":"8TAAMA,G,kBAAW,qCAEJC,EAAc,uCAAG,4BAAAC,EAAA,sEACLC,MAAM,GAAD,OAAIH,EAAJ,WADA,cACtBI,EADsB,yBAGrBA,EAASC,QAHY,2CAAH,qDAMdC,EAAmB,uCAAG,WAAOC,GAAP,eAAAL,EAAA,sEACVC,MAAM,GAAD,OAAIH,EAAJ,kBAAsBO,IADjB,cAC3BH,EAD2B,yBAG1BA,EAASC,QAHiB,2CAAH,sD,OCGnBG,EAA6B,SAAC,GAIpC,IAHLC,EAGI,EAHJA,sBACAF,EAEI,EAFJA,OACAG,EACI,EADJA,cAEA,EAAgCC,mBAAiB,IAAjD,mBAAOC,EAAP,KAAiBC,EAAjB,KAEMC,EAAY,uCAAG,4BAAAZ,EAAA,sEACeD,IADf,UACbc,EADa,QAGfL,EAHe,yCAIVG,EAAYE,EAAoBC,QAAO,SAAAC,GAAI,OAAIA,EAAKC,SAAWR,OAJrD,gCAOZG,EAAYE,IAPA,2CAAH,qDAclB,OAJAI,qBAAU,WACRL,MACC,CAACJ,IAGF,sBAAKU,UAAU,YAAf,UACE,wCAEA,oBAAIA,UAAU,kBAAd,SACGR,EAASS,KAAI,SAAAJ,GAAI,OAChB,qBAAkBG,UAAU,kBAA5B,UACE,gCACE,6CAAcH,EAAKC,OAAnB,SACCD,EAAKK,QAEPf,IAAWU,EAAKM,GACf,wBACEC,KAAK,SACLJ,UAAU,2BACVK,QAAS,kBAAMhB,EAAsB,IAHvC,mBAQA,wBACEe,KAAK,SACLJ,UAAU,2BACVK,QAAS,kBAAMhB,EAAsBQ,EAAKM,KAH5C,oBAdKN,EAAKM,aCtClBvB,G,MAAW,qCAEJ0B,EAAgB,uCAAG,WAAOnB,GAAP,eAAAL,EAAA,sEACPC,MAAM,GAAD,OAAIH,EAAJ,4BAAgCO,IAD9B,cACxBH,EADwB,yBAGvBA,EAASC,QAHc,2CAAH,sDAMhBsB,EAAa,uCAAG,WAAOJ,GAAP,eAAArB,EAAA,sEACJC,MAAM,GAAD,OAAIH,EAAJ,qBAAyBuB,GAAM,CACzDK,OAAQ,WAFiB,cACrBxB,EADqB,yBAKpBA,EAASC,QALW,2CAAH,sDAQbwB,EAAU,uCAAG,WACxBtB,EACAuB,EACAC,EACAT,GAJwB,eAAApB,EAAA,sEAMDC,MAAM,GAAD,OAAIH,EAAJ,aAAyB,CACnD4B,OAAQ,OACRI,QAAS,CACP,eAAgB,mCAElBV,KAAMW,KAAKC,UAAU,CACnB3B,SACAuB,OACAC,QACAT,WAfoB,cAMlBlB,EANkB,yBAmBjBA,EAASC,QAnBQ,2CAAH,4DCPV8B,EAAkC,SAAC,GAGzC,IAFL5B,EAEI,EAFJA,OACA6B,EACI,EADJA,gBAEA,EAAgCzB,mBAAS,IAAzC,mBAAO0B,EAAP,KAAiBC,EAAjB,KACA,EAAkC3B,mBAAS,IAA3C,mBAAO4B,EAAP,KAAkBC,EAAlB,KACA,EAAsC7B,mBAAS,IAA/C,mBAAO8B,EAAP,KAAoBC,EAApB,KAQMC,EAAY,uCAAG,WAAOC,GAAP,SAAA1C,EAAA,6DACnB0C,EAAMC,iBADa,SAGbhB,EAAWtB,EAAQ8B,EAAUE,EAAWE,GAH3B,uBAIbL,IAJa,OALnBE,EAAY,IACZE,EAAa,IACbE,EAAe,IAGI,2CAAH,sDASlB,OACE,uBACEtB,UAAU,iBACV0B,SAAUH,EAFZ,UAIE,qBAAKvB,UAAU,aAAf,SACE,uBACEI,KAAK,OACLM,KAAK,OACLiB,YAAY,YACZ3B,UAAU,wBACV4B,MAAOX,EACPY,SAAU,SAAAL,GAAK,OAAIN,EAAYM,EAAMM,OAAOF,YAIhD,qBAAK5B,UAAU,aAAf,SACE,uBACEI,KAAK,OACLM,KAAK,QACLiB,YAAY,aACZ3B,UAAU,wBACV4B,MAAOT,EACPU,SAAU,SAAAL,GAAK,OAAIJ,EAAaI,EAAMM,OAAOF,YAIjD,qBAAK5B,UAAU,aAAf,SACE,0BACEU,KAAK,OACLiB,YAAY,oBACZ3B,UAAU,wBACV4B,MAAOP,EACPQ,SAAU,SAAAL,GAAK,OAAIF,EAAeE,EAAMM,OAAOF,YAInD,wBACExB,KAAK,SACLJ,UAAU,uCACVK,QAASkB,EAHX,+BCvDOQ,G,MAA+B,SAAC,GAMtC,IALLC,EAKI,EALJA,cACAC,EAII,EAJJA,aACA9C,EAGI,EAHJA,OACAG,EAEI,EAFJA,cACA4C,EACI,EADJA,gBAEA,EAAgD3C,oBAAS,GAAzD,mBAAO4C,EAAP,KAAyBC,EAAzB,KAEMC,EAAe,uCAAG,4BAAAvD,EAAA,sEACewB,EAAiBnB,GADhC,OAChBmD,EADgB,OAGtBJ,EAAgBI,GAHM,2CAAH,qDAMfC,EAAmB,uCAAG,WAAOpC,GAAP,SAAArB,EAAA,sEACpByB,EAAcJ,GADM,uBAEpBkC,IAFoB,2CAAH,sDAKzBtC,qBAAU,WACRsC,MACC,CAAC/C,IAMJ,OACE,sBAAKU,UAAU,cAAf,UACE,+CAEA,yBAASA,UAAU,oBAAnB,SACE,4BAAIgC,MAGN,0BAAShC,UAAU,wBAAnB,UACE,wBACEI,KAAK,SACLJ,UAAU,wBACVK,QAhBiB,WACvB+B,GAAqBD,IAYjB,wBAKWF,EAAaO,OALxB,eAQA,oBACExC,UAAWmC,EAAmB,oBAAsB,0BADtD,SAGGF,EAAahC,KAAI,SAAAwC,GAAU,OAC1B,qBAAwBzC,UAAU,yBAAlC,UACE,wBACEI,KAAK,SACLJ,UAAU,oCACVK,QAAS,kBAAMkC,EAAoBE,EAAWtC,KAHhD,eAOA,4BAAIsC,EAAWvC,SARRuC,EAAWtC,YAc1B,kCACE,qBAAKH,UAAU,4BAAf,SACE,cAAC,EAAD,CACEgB,gBAAiBqB,EACjBlD,OAAQA,aC/EPuD,EAAS,uCAAG,4BAAA5D,EAAA,sEACAC,MAHT,2CAES,cACjBC,EADiB,yBAGhBA,EAASC,QAHO,2CAAH,qDCOT0D,EAA6BC,IAAMC,MAC9C,YAAwC,IAArCvD,EAAoC,EAApCA,cAAewD,EAAqB,EAArBA,eAChB,EAA0BvD,mBAAiB,IAA3C,mBAAOwD,EAAP,KAAcC,EAAd,KAEMC,EAAQ,uCAAG,4BAAAnE,EAAA,sEACe4D,IADf,OACTQ,EADS,OAGfF,EAASE,GAHM,2CAAH,qDAUd,OAJAnD,qBAAU,WACRkD,MACC,IAGD,mCACE,yBACEjD,UAAU,qBACV4B,MAAOtC,EACPuC,SAAUiB,EAHZ,UAKE,wBAAQlB,MAAM,IAAd,uBACCmB,EAAM9C,KAAI,SAAAkD,GAAI,OACb,wBAAsBvB,MAAOuB,EAAKhD,GAAlC,SACGgD,EAAKzC,MADKyC,EAAKhD,eCmCfiD,EAxDO,WACpB,MAAwC7D,mBAAiB,IAAzD,mBAAO0C,EAAP,KAAqBC,EAArB,KACA,EAA0C3C,mBAAS,IAAnD,mBAAOyC,EAAP,KAAsBqB,EAAtB,KACA,EAA4B9D,mBAAS,GAArC,mBAAOJ,EAAP,KAAemE,EAAf,KACA,EAA0C/D,mBAAS,GAAnD,mBAAOD,EAAP,KAAsBiE,EAAtB,KAEMlE,EAAqB,uCAAG,WAAOc,GAAP,qBAAArB,EAAA,6DAC5BwE,EAAUnD,GADkB,SAEkCqD,QAAQC,IAAI,CACxEvE,EAAoBiB,GACpBG,EAAiBH,KAJS,mCAErBuD,EAFqB,KAEEpB,EAFF,KAO5BJ,EAAgBI,GAChBe,EAAiBK,EAAsBC,OARX,2CAAH,sDAWrBb,EAAiBc,uBAAY,SAACpC,GAClC+B,GAAkB/B,EAAMM,OAAOF,SAC9B,IAEH,OACE,sBAAK5B,UAAU,MAAf,UACE,yBAAQA,UAAU,cAAlB,gCAEE,cAAC2C,EAAD,CACErD,cAAeA,EACfwD,eAAgBA,OAIpB,uBAAM9C,UAAU,YAAhB,UACE,qBAAKA,UAAU,eAAf,SACE,cAAC,EAAD,CACEV,cAAeA,EACfD,sBAAuBA,EACvBF,OAAQA,MAIZ,qBAAKa,UAAU,eAAf,SACc,IAAXb,GACC,cAAC,EAAD,CACE+C,gBAAiBA,EACjBF,cAAeA,EACfC,aAAcA,EACd3C,cAAeA,EACfH,OAAQA,aCtDtB0E,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.c8734fde.chunk.js","sourcesContent":["const BASE_URL = 'https://mate.academy/students-api';\n\nexport const loadUsersPosts = async (): Promise<Post[]> => {\n  const response = await fetch(`${BASE_URL}/posts`);\n\n  return response.json();\n};\n\nexport const loadUserPostDetails = async (postId: number) => {\n  const response = await fetch(`${BASE_URL}/posts/${postId}`);\n\n  return response.json();\n};\n","import React, { useState, useEffect } from 'react';\nimport './PostsList.scss';\n\nimport { loadUsersPosts } from '../../api/posts';\n\ntype Props = {\n  handleOpenPostDetails: (postId: number) => void;\n  postId: number;\n  selectorValue: number;\n};\n\nexport const PostsList: React.FC<Props> = ({\n  handleOpenPostDetails,\n  postId,\n  selectorValue,\n}) => {\n  const [postList, setPostList] = useState<Post[]>([]);\n\n  const getUserPosts = async () => {\n    const userPostsFromServer = await loadUsersPosts();\n\n    if (selectorValue) {\n      return setPostList(userPostsFromServer.filter(post => post.userId === selectorValue));\n    }\n\n    return setPostList(userPostsFromServer);\n  };\n\n  useEffect(() => {\n    getUserPosts();\n  }, [selectorValue]);\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {postList.map(post => (\n          <li key={post.id} className=\"PostsList__item\">\n            <div>\n              <b>{`[User #${post.userId}]: `}</b>\n              {post.body}\n            </div>\n            {postId === post.id ? (\n              <button\n                type=\"button\"\n                className=\"PostsList__button button\"\n                onClick={() => handleOpenPostDetails(0)}\n              >\n                Close\n              </button>\n            ) : (\n              <button\n                type=\"button\"\n                className=\"PostsList__button button\"\n                onClick={() => handleOpenPostDetails(post.id)}\n              >\n                Open\n              </button>\n            )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","const BASE_URL = 'https://mate.academy/students-api';\n\nexport const loadPostComments = async (postId: number) => {\n  const response = await fetch(`${BASE_URL}/comments?postId=${postId}`);\n\n  return response.json();\n};\n\nexport const deleteComment = async (id: number) => {\n  const response = await fetch(`${BASE_URL}/comments/${id}`, {\n    method: 'DELETE',\n  });\n\n  return response.json();\n};\n\nexport const addComment = async (\n  postId: number,\n  name: string,\n  email: string,\n  body: string,\n): Promise<PostComm> => {\n  const response = await fetch(`${BASE_URL}/comments`, {\n    method: 'POST',\n    headers: {\n      'Content-type': 'application/json; charset=UTF-8',\n    },\n    body: JSON.stringify({\n      postId,\n      name,\n      email,\n      body,\n    }),\n  });\n\n  return response.json();\n};\n","import React, { useState } from 'react';\nimport './NewCommentForm.scss';\nimport { addComment } from '../../api/comments';\n\ntype Props = {\n  postId: number;\n  getUserComments: () => Promise<void>;\n};\n\nexport const NewCommentForm: React.FC<Props> = ({\n  postId,\n  getUserComments,\n}) => {\n  const [userName, setUserName] = useState('');\n  const [userEmail, setUserEmail] = useState('');\n  const [userComment, setUserComment] = useState('');\n\n  const clearInputs = () => {\n    setUserName('');\n    setUserEmail('');\n    setUserComment('');\n  };\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n\n    await addComment(postId, userName, userEmail, userComment);\n    await getUserComments();\n\n    clearInputs();\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={userName}\n          onChange={event => setUserName(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={userEmail}\n          onChange={event => setUserEmail(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={userComment}\n          onChange={event => setUserComment(event.target.value)}\n        />\n      </div>\n\n      <button\n        type=\"button\"\n        className=\"NewCommentForm__submit-button button\"\n        onClick={handleSubmit}\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\n\nimport { loadPostComments, deleteComment } from '../../api/comments';\n\ntype Props = {\n  userPostTitle: string;\n  userComments: Post[];\n  postId: number;\n  selectorValue: number;\n  setUserComments: React.Dispatch<React.SetStateAction<Post[]>>;\n};\n\nexport const PostDetails: React.FC<Props> = ({\n  userPostTitle,\n  userComments,\n  postId,\n  selectorValue,\n  setUserComments,\n}) => {\n  const [isCommemtsHidden, setIsCommemtsHidden] = useState(true);\n\n  const getPostComments = async () => {\n    const userCommentsFromServer = await loadPostComments(postId);\n\n    setUserComments(userCommentsFromServer);\n  };\n\n  const handleDeleteComment = async (id: number) => {\n    await deleteComment(id);\n    await getPostComments();\n  };\n\n  useEffect(() => {\n    getPostComments();\n  }, [selectorValue]);\n\n  const handleButtonHide = () => {\n    setIsCommemtsHidden(!isCommemtsHidden);\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      <section className=\"PostDetails__post\">\n        <p>{userPostTitle}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        <button\n          type=\"button\"\n          className=\"button button-visible\"\n          onClick={handleButtonHide}\n        >\n          {`Hide ${userComments.length} comments`}\n        </button>\n\n        <ul\n          className={isCommemtsHidden ? 'PostDetails__list' : 'PostDetails__list--hide'}\n        >\n          {userComments.map(commentary => (\n            <li key={commentary.id} className=\"PostDetails__list-item\">\n              <button\n                type=\"button\"\n                className=\"PostDetails__remove-button button\"\n                onClick={() => handleDeleteComment(commentary.id)}\n              >\n                X\n              </button>\n              <p>{commentary.body}</p>\n            </li>\n          ))}\n        </ul>\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            getUserComments={getPostComments}\n            postId={postId}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","const API_URL = 'https://mate.academy/students-api/users';\n\nexport const loadUsers = async () => {\n  const response = await fetch(API_URL);\n\n  return response.json();\n};\n","import React, { useState, useEffect } from 'react';\n\nimport { loadUsers } from '../../api/users';\n\ntype Props = {\n  selectorValue: number\n  handleSelector: (event: React.ChangeEvent<HTMLSelectElement>) => void\n};\n\nexport const UsersList: React.FC<Props> = React.memo(\n  ({ selectorValue, handleSelector }) => {\n    const [users, setUsers] = useState<User[]>([]);\n\n    const getUsers = async () => {\n      const usersFromServer = await loadUsers();\n\n      setUsers(usersFromServer);\n    };\n\n    useEffect(() => {\n      getUsers();\n    }, []);\n\n    return (\n      <>\n        <select\n          className=\"App__user-selector\"\n          value={selectorValue}\n          onChange={handleSelector}\n        >\n          <option value=\"0\">All users</option>\n          {users.map(user => (\n            <option key={user.id} value={user.id}>\n              {user.name}\n            </option>\n          ))}\n        </select>\n      </>\n    );\n  },\n);\n","import React, { useState, useCallback } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\n\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { UsersList } from './components/UsersList';\n\nimport { loadUserPostDetails } from './api/posts';\nimport { loadPostComments } from './api/comments';\n\nconst App: React.FC = () => {\n  const [userComments, setUserComments] = useState<Post[]>([]);\n  const [userPostTitle, setUserPostTitle] = useState('');\n  const [postId, setPostId] = useState(0);\n  const [selectorValue, setSelectorValue] = useState(0);\n\n  const handleOpenPostDetails = async (id: number) => {\n    setPostId(id);\n    const [postDetailsFromServer, userCommentsFromServer] = await Promise.all([\n      loadUserPostDetails(id),\n      loadPostComments(id),\n    ]);\n\n    setUserComments(userCommentsFromServer);\n    setUserPostTitle(postDetailsFromServer.title);\n  };\n\n  const handleSelector = useCallback((event: React.ChangeEvent<HTMLSelectElement>) => {\n    setSelectorValue(+event.target.value);\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        Select a user: &nbsp;\n        <UsersList\n          selectorValue={selectorValue}\n          handleSelector={handleSelector}\n        />\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            selectorValue={selectorValue}\n            handleOpenPostDetails={handleOpenPostDetails}\n            postId={postId}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          {postId !== 0 && (\n            <PostDetails\n              setUserComments={setUserComments}\n              userPostTitle={userPostTitle}\n              userComments={userComments}\n              selectorValue={selectorValue}\n              postId={postId}\n            />\n          )}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}